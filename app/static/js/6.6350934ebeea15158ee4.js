webpackJsonp([6],{Avcl:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("mvHQ"),s=e.n(a),n=e("4M9o"),l=e.n(n),c=(e("JHbs"),{name:"feedback",mounted:function(){var t=this;this.muiFeedback(),l.a.plusReady(function(){t.muiFeedback()})},methods:{muiFeedback:function(){var t=1,i=0,e={question:document.getElementById("question"),contact:document.getElementById("contact"),imageList:document.getElementById("image-list"),submitBtn:document.getElementById("submit")};e.files=[],e.uploader=null,e.deviceInfo=null,l.a.plusReady(function(){e.deviceInfo={appid:plus.runtime.appid,imei:plus.device.imei,images:e.files,p:l.a.os.android?"a":"i",md:plus.device.model,app_version:plus.runtime.version,plus_version:plus.runtime.innerVersion,os:l.a.os.version,net:""+plus.networkinfo.getCurrentType()}}),e.clearForm=function(){e.question.value="",e.contact.value="",e.imageList.innerHTML="",e.newPlaceholder(),e.files=[],t=0,0,0,i=0,l()(".icons i").each(function(t,i){i.classList.contains("mui-icon-star-filled")&&(i.classList.add("mui-icon-star"),i.classList.remove("mui-icon-star-filled"))})},e.getFileInputArray=function(){return[].slice.call(e.imageList.querySelectorAll(".file"))},e.addFile=function(i){e.files.push({name:"images"+t,path:i,id:"img-"+t}),t++},e.submitBtn.addEventListener("tap",function(t){return""==e.question.value||""!=e.contact.value&&0!=e.contact.value.search(/^(\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+)|([1-9]\d{4,9})$/)?l.a.toast("信息填写不符合规范"):e.question.value.length>200||e.contact.value.length>200?l.a.toast("信息超长,请重新填写~"):plus.networkinfo.getCurrentType()==plus.networkinfo.CONNECTION_NONE?l.a.toast("连接网络失败，请稍后再试"):void e.send(l.a.extend({},e.deviceInfo,{content:e.question.value,contact:e.contact.value,images:e.files,score:""+i}))},!1),e.send=function(t){e.uploader=plus.uploader.createUpload("https://service.dcloud.net.cn/feedback",{method:"POST"},function(t,i){if(console.log("upload cb:"+t.responseText),200==i){var e=JSON.parse(t.responseText);0===e.ret&&"Success"===e.desc&&console.log("upload success")}else console.log("upload fail")}),l.a.each(t,function(t,i){"images"!==t&&(console.log("addData:"+t+","+i),e.uploader.addData(t,i))}),l.a.each(e.files,function(t,i){var a=e.files[t];console.log("addFile:"+s()(a)),e.uploader.addFile(a.path,{key:a.name})}),e.uploader.start(),l.a.alert("感谢反馈，点击确定关闭","问题反馈","确定",function(){e.clearForm(),l.a.back()}),plus.nativeUI.showWaiting()},l()(".icons").on("tap","i",function(){var t=parseInt(this.getAttribute("data-index")),e=this.parentNode.children;if(this.classList.contains("mui-icon-star"))for(var a=0;a<t;a++)e[a].classList.remove("mui-icon-star"),e[a].classList.add("mui-icon-star-filled");else for(a=t;a<5;a++)e[a].classList.add("mui-icon-star"),e[a].classList.remove("mui-icon-star-filled");i=t}),l()(".mui-popover").on("tap","li",function(t){document.getElementById("question").value=document.getElementById("question").value+this.children[0].innerHTML,l()(".mui-popover").popover("toggle")})}}}),o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"feedback-contain"},[e("header",{staticClass:"mui-bar mui-bar-nav"},[e("a",{staticClass:"mui-action-back mui-icon mui-icon-left-nav mui-pull-left"}),t._v(" "),e("button",{staticClass:"mui-btn mui-btn-blue mui-btn-link mui-pull-right",attrs:{id:"submit"}},[t._v("发送")]),t._v(" "),e("h1",{staticClass:"mui-title"},[t._v("问题反馈")])]),t._v(" "),e("div",{staticClass:"mui-content"},[e("div",{staticClass:"mui-content-padded"},[e("div",{staticClass:"mui-inline"},[t._v("问题和意见")]),t._v(" "),e("a",{staticClass:"mui-pull-right mui-inline",attrs:{href:"#popover"}},[t._v("\n\t\t\t\t\t快捷输入\n\t\t\t\t\t"),e("span",{staticClass:"mui-icon mui-icon-arrowdown"})]),t._v(" "),e("div",{staticClass:"mui-popover",attrs:{id:"popover"}},[e("div",{staticClass:"mui-popover-arrow"}),t._v(" "),e("div",{staticClass:"mui-scroll-wrapper"},[e("div",{staticClass:"mui-scroll"},[e("ul",{staticClass:"mui-table-view"},[e("li",{staticClass:"mui-table-view-cell stream"},[e("a",{attrs:{href:"#"}},[t._v("桌面快捷方式创建失败")])]),t._v(" "),e("li",{staticClass:"mui-table-view-cell"},[e("a",{attrs:{href:"#"}},[t._v("界面显示错乱")])]),t._v(" "),e("li",{staticClass:"mui-table-view-cell"},[e("a",{attrs:{href:"#"}},[t._v("启动缓慢，卡出翔了")])]),t._v(" "),e("li",{staticClass:"mui-table-view-cell"},[e("a",{attrs:{href:"#"}},[t._v("偶发性崩溃")])]),t._v(" "),e("li",{staticClass:"mui-table-view-cell"},[e("a",{attrs:{href:"#"}},[t._v("UI无法直视，丑哭了")])])])])])])]),t._v(" "),e("div",{staticClass:"row mui-input-row"},[e("textarea",{staticClass:"mui-input-clear question",attrs:{id:"question",placeholder:"请详细描述你的问题和意见..."}})]),t._v(" "),e("p",[t._v("QQ/邮箱")]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("input",{staticClass:"mui-input-clear contact",attrs:{id:"contact",type:"text",placeholder:"(选填,方便我们联系你 )"}})]),t._v(" "),e("div",{staticClass:"mui-content-padded"},[e("div",{staticClass:"mui-inline"},[t._v("应用评分")]),t._v(" "),e("div",{staticClass:"icons mui-inline",staticStyle:{"margin-left":"6px"}},[e("i",{staticClass:"mui-icon mui-icon-star",attrs:{"data-index":"1"}}),t._v(" "),e("i",{staticClass:"mui-icon mui-icon-star",attrs:{"data-index":"2"}}),t._v(" "),e("i",{staticClass:"mui-icon mui-icon-star",attrs:{"data-index":"3"}}),t._v(" "),e("i",{staticClass:"mui-icon mui-icon-star",attrs:{"data-index":"4"}}),t._v(" "),e("i",{staticClass:"mui-icon mui-icon-star",attrs:{"data-index":"5"}})])]),e("br")])])}]};var u=e("VU/8")(c,o,!1,function(t){e("EceT")},"data-v-17ee337a",null);i.default=u.exports},EceT:function(t,i){},JHbs:function(t,i){}});
//# sourceMappingURL=6.6350934ebeea15158ee4.js.map